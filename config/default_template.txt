message = f"â³ `Anh {user.name} Æ¡i: `\n\n"

if today:
    message += "ğŸ”´ *CÃ”NG VIá»†C Äáº¾N Háº N HÃ”M NAY* ğŸ”´\n"
    message += "ğŸ’¡ _Anh cÃ³ nhá»¯ng cÃ´ng viá»‡c sau cáº§n hoÃ n thÃ nh, chÃº Ã½ nhÃ©!_\n\n"

    for i, mess in enumerate(today, 1):
        task = mess.get("task")
        if task and task.id not in mess_ids:
            mess_ids.add(task.id)
            task.update(is_seen=True)

        message += f"ğŸ“Œ *CÃ´ng viá»‡c {i}:*\n"
        if is_admin:
            message += f"    *NgÆ°á»i phá»¥ trÃ¡ch:* `{task.representative}`\n"
        message += f"    *CÃ´ng ty:* {task.company}\n"
        message += f"    *Viá»‡c cáº§n lÃ m:* {task.todo}\n"
        message += f"    *Háº¡ng má»¥c:* {task.category}\n"
        if task.support:
            message += f"    *Há»— trá»£:* {task.support}\n"
        message += f"    *Deadline:* {task.deadline.strftime('%d-%m-%Y')}\n\n"

if late:
    message += "âš ï¸ *CÃ”NG VIá»†C QUÃ Háº N* âš ï¸\n"
    message += "ğŸš¨ _Má»™t sá»‘ cÃ´ng viá»‡c Ä‘Ã£ trá»… Deadline, cáº§n xá»­ lÃ½ gáº¥p!_\n\n"

    for i, mess in enumerate(late, 1):
        task = mess.get("task")
        if task and task.id not in mess_ids:
            mess_ids.add(task.id)
            task.update(is_seen=True)

        message += f"âŒ *CÃ´ng viá»‡c trá»… {i}:*\n"
        if is_admin:
            message += f"    *NgÆ°á»i phá»¥ trÃ¡ch:* `{task.representative}`\n"
        message += f"    *CÃ´ng ty:* {task.company}\n"
        message += f"    *Viá»‡c cáº§n lÃ m:* {task.todo}\n"
        message += f"    *Háº¡ng má»¥c:* {task.category}\n"
        if task.support:
            message += f"    *Há»— trá»£:* {task.support}\n"
        message += f"    *Deadline:* {task.deadline.strftime('%d-%m-%Y')}\n"
        message += f"    *Trá»…:* {task.delay} ngÃ y\n\n"

if future:
    message += "ğŸŸ¢ *CÃ”NG VIá»†C Sáº®P Tá»šI DEADLINE* ğŸŸ¢\n"
    message += "ğŸ“† _Nhá»¯ng cÃ´ng viá»‡c dÆ°á»›i Ä‘Ã¢y sáº¯p Ä‘áº¿n háº¡n, anh chuáº©n bá»‹ trÆ°á»›c nhÃ©!_\n\n"

    for i, mess in enumerate(future, 1):
        task = mess.get("task")
        if task and task.id not in mess_ids:
            mess_ids.add(task.id)
            task.update(is_seen=True)

        message += f"ğŸ”œ *CÃ´ng viá»‡c {i}:*\n"
        if is_admin:
            message += f"    *NgÆ°á»i phá»¥ trÃ¡ch:* `{task.representative}`\n"
        message += f"    *CÃ´ng ty:* {task.company}\n"
        message += f"    *Viá»‡c cáº§n lÃ m:* {task.todo}\n"
        message += f"    *Háº¡ng má»¥c:* {task.category}\n"
        if task.support:
            message += f"    *Há»— trá»£:* {task.support}\n"
        message += f"    *Deadline:* {task.deadline.strftime('%d-%m-%Y')}\n\n"

